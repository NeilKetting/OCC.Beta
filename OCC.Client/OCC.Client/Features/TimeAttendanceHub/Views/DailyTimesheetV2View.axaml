<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:viewModels="clr-namespace:OCC.Client.Features.TimeAttendanceHub.ViewModels"
             mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="450"
             x:Class="OCC.Client.Features.TimeAttendanceHub.Views.DailyTimesheetV2View"
             x:DataType="viewModels:DailyTimesheetV2ViewModel">

    <Grid RowDefinitions="Auto,*">
        <!-- Header -->
        <Border Grid.Row="0" Background="{DynamicResource CardBackgroundBrush}" 
                CornerRadius="8" Padding="16" Margin="0,0,0,16"
                BoxShadow="0 2 4 0 #1A000000">
            <StackPanel Orientation="Horizontal" Spacing="16" VerticalAlignment="Center">
                <Border Background="{DynamicResource AccentTealBrush}" Width="40" Height="40" CornerRadius="8">
                    <PathIcon Data="{StaticResource calculator_regular}" Foreground="White" Width="20" Height="20"/>
                </Border>
                <StackPanel>
                    <TextBlock Text="Daily Timesheet V2 (Payroll)" FontSize="20" FontWeight="SemiBold" Foreground="{DynamicResource TextPrimaryBrush}"/>
                    <TextBlock Text="Aggregated payable hours ready for Wage Run" Foreground="{DynamicResource TextSecondaryBrush}"/>
                </StackPanel>
                
                <CalendarDatePicker Grid.Column="1" Margin="32,0,0,0" MinWidth="150" SelectedDate="{Binding Date}"/>
                
                <Button Grid.Column="2" Classes="Reset" Margin="16,0,0,0"
                        Command="{Binding LoadDataAsync}">
                    <StackPanel Orientation="Horizontal" Spacing="8">
                        <PathIcon Data="{StaticResource IconRefresh}" Width="16" Height="16"/>
                        <TextBlock Text="Refresh"/>
                    </StackPanel>
                </Button>
            </StackPanel>
        </Border>

        <!-- Events List -->
        <Border Grid.Row="1" Background="{DynamicResource CardBackgroundBrush}" 
                CornerRadius="8" Padding="16" BoxShadow="0 2 4 0 #1A000000">
            <Grid>
                <ProgressBar IsIndeterminate="True" 
                             IsVisible="{Binding IsLoading}" 
                             VerticalAlignment="Top" 
                             Margin="0,-16,0,0"
                             Foreground="{DynamicResource AccentTealBrush}"/>
                             
                <DataGrid ItemsSource="{Binding Timesheets}"
                          AutoGenerateColumns="False"
                          IsReadOnly="True"
                          GridLinesVisibility="Horizontal"
                          RowBackground="Transparent"
                          VerticalScrollBarVisibility="Auto">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="Employee" Binding="{Binding EmployeeName}" Width="*" />
                        <DataGridTextColumn Header="Status" Binding="{Binding Status}" Width="150"/>
                        <DataGridTextColumn Header="First In" Binding="{Binding FirstInTime, StringFormat=\{0:HH:mm\}}" Width="120" />
                        <DataGridTextColumn Header="Last Out" Binding="{Binding LastOutTime, StringFormat=\{0:HH:mm\}}" Width="120" />
                        <DataGridTextColumn Header="Calc Hours" Binding="{Binding CalculatedHours, StringFormat=\{0:F2\}}" Width="100"/>
                        <DataGridTextColumn Header="Wage Est (R)" Binding="{Binding WageEstimated, StringFormat=\{0:F2\}}" Width="120"/>
                    </DataGrid.Columns>
                </DataGrid>
            </Grid>
        </Border>
    </Grid>
</UserControl>
