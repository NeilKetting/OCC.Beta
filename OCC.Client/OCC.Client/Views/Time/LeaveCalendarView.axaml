<UserControl xmlns="https://github.com/avaloniaui"
			 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
			 xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
			 xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
			 xmlns:vm="using:OCC.Client.ViewModels.Time"
			 mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="600"
			 x:Class="OCC.Client.Views.Time.LeaveCalendarView"
			 x:DataType="vm:LeaveCalendarViewModel">

	<UserControl.Styles>
		<!-- Day Cell Style -->
		<Style Selector="Border.DayCell">
			<Setter Property="Background" Value="White"/>
			<Setter Property="BorderBrush" Value="#E5E7EB"/> <!-- Gray 200 -->
			<Setter Property="BorderThickness" Value="1"/>
			<Setter Property="Padding" Value="5"/>
		</Style>

		<!-- Weekend Style -->
		<Style Selector="Border.Weekend">
			<Setter Property="Background" Value="#F9FAFB"/> <!-- Gray 50 (Very light gray) -->
		</Style>

		<!-- Not Current Month Style -->
		<Style Selector="Border.NotCurrent">
			<Setter Property="Opacity" Value="0.5"/>
			<Setter Property="BorderBrush" Value="#F3F4F6"/> <!-- Gray 100 (Lighter border) -->
		</Style>

		<!-- Holiday Style -->
		<Style Selector="Border.Holiday">
			<Setter Property="Background" Value="#FEF2F2"/> <!-- Light Red/Pink -->
		</Style>
		<Style Selector="TextBlock.HolidayText">
			<Setter Property="Foreground" Value="#EF4444"/> <!-- Red -->
			<Setter Property="FontWeight" Value="SemiBold"/>
		</Style>

		<!-- Today Style -->
		<Style Selector="Border.Today">
			<Setter Property="BorderBrush" Value="{DynamicResource PrimaryTeal}"/>
			<Setter Property="BorderThickness" Value="2"/>
		</Style>

		<!-- Leave Bar Styles -->
		<Style Selector="Border.LeaveBar">
			<Setter Property="Height" Value="20"/>
			<Setter Property="CornerRadius" Value="4"/>
		</Style>
		<Style Selector="Border.LeaveBar.Single">
			<Setter Property="CornerRadius" Value="4"/>
			<Setter Property="Margin" Value="2,0"/>
		</Style>
		<Style Selector="Border.LeaveBar.Start">
			<Setter Property="CornerRadius" Value="4,0,0,4"/>
			<Setter Property="Margin" Value="2,0,0,0"/>
		</Style>
		<Style Selector="Border.LeaveBar.Middle">
			<Setter Property="CornerRadius" Value="0"/>
			<Setter Property="Margin" Value="0"/>
		</Style>
		<Style Selector="Border.LeaveBar.End">
			<Setter Property="CornerRadius" Value="0,4,4,0"/>
			<Setter Property="Margin" Value="0,0,2,0"/>
		</Style>
	</UserControl.Styles>

	<Grid RowDefinitions="Auto, *">
		<!-- Header -->
		<Border Grid.Row="0" Margin="5" Background="{DynamicResource WeatheredCementGradient}" Classes="TopHeader" BoxShadow="0 1 3 0 #15000000">
			
			<Grid ColumnDefinitions="Auto, Auto, Auto" HorizontalAlignment="Center" ColumnSpacing="30">
				<Button Grid.Column="0" Command="{Binding PreviousMonthCommand}" Classes="IconButton" ToolTip.Tip="Previous Month">
					<PathIcon Data="{StaticResource IconChevronLeft}" Width="16" Height="16"/>
				</Button>
				<StackPanel Grid.Column="1" Orientation="Horizontal" Spacing="10" VerticalAlignment="Center">
					<PathIcon Data="{StaticResource IconCalendar}" Width="20" Height="20" Foreground="{DynamicResource PrimaryTeal}"/>
					<TextBlock FontSize="20" FontWeight="Bold" Foreground="{DynamicResource TextPrimaryDark}">
						<TextBlock.Text>
							<MultiBinding StringFormat="{}{0} {1}">
								<Binding Path="MonthName"/>
								<Binding Path="YearName"/>
							</MultiBinding>
						</TextBlock.Text>
					</TextBlock>
				</StackPanel>

				<Button Grid.Column="2" Command="{Binding NextMonthCommand}" Classes="IconButton" ToolTip.Tip="Next Month">
					<PathIcon Data="{StaticResource IconChevronRight}" Width="16" Height="16"/>
				</Button>
			</Grid>
		</Border>

		<!-- Calendar Grid -->
		<Border Grid.Row="1" Background="White" CornerRadius="8" BoxShadow="0 1 3 0 #15000000">
			<Grid RowDefinitions="Auto, *">
				<!-- Weekday Headers -->
				<ItemsControl Grid.Row="0" ItemsSource="{Binding WeekDays}">
					<ItemsControl.ItemsPanel>
						<ItemsPanelTemplate>
							<UniformGrid Rows="1"/>
						</ItemsPanelTemplate>
					</ItemsControl.ItemsPanel>
					<ItemsControl.ItemTemplate>
						<DataTemplate>
							<Border Padding="10" Background="{DynamicResource BackgroundLightGray}">
								<TextBlock Text="{Binding}" HorizontalAlignment="Center" FontWeight="SemiBold" Foreground="{DynamicResource TextSecondaryGray}"/>
							</Border>
						</DataTemplate>
					</ItemsControl.ItemTemplate>
				</ItemsControl>

				<!-- Days -->
				<ItemsControl Grid.Row="1" ItemsSource="{Binding Days}">
					<ItemsControl.ItemsPanel>
						<ItemsPanelTemplate>
							<UniformGrid Rows="6" Columns="7"/>
						</ItemsPanelTemplate>
					</ItemsControl.ItemsPanel>
					<ItemsControl.ItemTemplate>
						<DataTemplate>
							<Border Classes="DayCell"
									Classes.NotCurrent="{Binding IsNotCurrentMonth}"
									Classes.Weekend="{Binding IsWeekend}"
									Classes.Holiday="{Binding IsHoliday}"
									Classes.Today="{Binding IsToday}">
								<Grid RowDefinitions="Auto, *">
									<!-- Date Number -->
									<TextBlock Grid.Row="0" Text="{Binding DayNumber}" HorizontalAlignment="Right"
											   Foreground="{DynamicResource TextSecondaryGray}"/>

									<!-- Holiday Name -->
									<TextBlock Grid.Row="1" Text="{Binding HolidayName}"
											   Classes="HolidayText"
											   TextWrapping="Wrap"
											   FontSize="11"
											   Margin="0,0,0,2"
											   HorizontalAlignment="Center"
											   IsVisible="{Binding IsHoliday}"/>

									<!-- Events List -->
									<ItemsControl Grid.Row="2" ItemsSource="{Binding Items}">
										<ItemsControl.ItemTemplate>
											<DataTemplate>
												<Panel Margin="0,1">
													<!-- Birthday Item -->
													<StackPanel Orientation="Horizontal" Spacing="4"
																IsVisible="{Binding Type, Converter={x:Static ObjectConverters.Equal}, ConverterParameter={x:Static vm:CalendarItemType.Birthday}}">
														<TextBlock Text="ðŸŽ‚" FontSize="12"/>
														<TextBlock Text="{Binding Text}" FontSize="10" VerticalAlignment="Center" Foreground="{DynamicResource TextPrimaryDark}" TextTrimming="CharacterEllipsis"/>
													</StackPanel>

													<!-- Leave Item -->
													<Border Classes="LeaveBar"
															Background="{Binding Color}"
															ToolTip.Tip="{Binding Tooltip}"
															IsVisible="{Binding Type, Converter={x:Static ObjectConverters.Equal}, ConverterParameter={x:Static vm:CalendarItemType.Leave}}"
															Classes.Single="{Binding Span, Converter={x:Static ObjectConverters.Equal}, ConverterParameter={x:Static vm:CalendarItemSpan.Single}}"
															Classes.Start="{Binding Span, Converter={x:Static ObjectConverters.Equal}, ConverterParameter={x:Static vm:CalendarItemSpan.Start}}"
															Classes.Middle="{Binding Span, Converter={x:Static ObjectConverters.Equal}, ConverterParameter={x:Static vm:CalendarItemSpan.Middle}}"
															Classes.End="{Binding Span, Converter={x:Static ObjectConverters.Equal}, ConverterParameter={x:Static vm:CalendarItemSpan.End}}">
														<TextBlock Text="{Binding Text}" FontSize="10" Foreground="White" Padding="4,1" TextTrimming="CharacterEllipsis"/>
													</Border>
												</Panel>
											</DataTemplate>
										</ItemsControl.ItemTemplate>
									</ItemsControl>
								</Grid>
							</Border>
						</DataTemplate>
					</ItemsControl.ItemTemplate>
				</ItemsControl>
			</Grid>
		</Border>
	</Grid>
</UserControl>
